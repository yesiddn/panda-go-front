<div class="flex items-center justify-center min-h-screen">
  <div class="flex flex-col items-center gap-y-6 rounded-xl bg-white/10 p-8 shadow-lg ring-1 ring-black/5">
    <div class="text-center">
      <h2 class="text-2xl font-bold text-gray-900">Crear nueva ruta</h2>
    </div>

    <form (ngSubmit)="submit()" [formGroup]="form" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700">Código de ruta</label>
          <input pInputText formControlName="route_code" class="w-full" />
          <div class="h-4">
            @if (route_code?.invalid && (route_code?.dirty || route_code?.touched)) {
            <small class="text-red-500">
              <span>El código de ruta es requerido</span>
            </small>
            }
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Fecha</label>
          <!-- la fecha minima es mañana -->
          <p-datepicker formControlName="route_date" placeholder="DD/MM/YYYY" [minDate]="minDate" class="w-full"></p-datepicker>
          <div class="h-4">
            @if (route_date?.invalid && (route_date?.dirty || route_date?.touched)) {
            <small class="text-red-500">La fecha es requerida</small>
            }
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Paradas (capacidad)</label>
          <input pInputText formControlName="capacity_stops" type="number" class="w-full" />
          <div class="h-4">
            @if (capacity_stops?.invalid && (capacity_stops?.dirty || capacity_stops?.touched)) {
            <small class="text-red-500">La cantidad de paradas debe ser mayor a 0</small>
            }
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Peso (kg)</label>
          <input pInputText formControlName="capacity_weight_kg" class="w-full" />
          <div class="h-4">
            @if (capacity_weight_kg?.invalid && (capacity_weight_kg?.dirty || capacity_weight_kg?.touched)) {
            <small class="text-red-500">El peso es requerido</small>
            }
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Hora inicio</label>
          <p-datepicker formControlName="start_time" [timeOnly]="true" placeholder="HH:MM"
            class="w-full"></p-datepicker>
          <div class="h-4">
            @if (start_time?.invalid && (start_time?.dirty || start_time?.touched)) {
            <small class="text-red-500">La hora de inicio es requerida</small>
            }
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Hora fin</label>
          <p-datepicker formControlName="end_time" [timeOnly]="true" [minDate]="form.get('start_time')?.value"
            placeholder="HH:MM" class="w-full"></p-datepicker>
          <div class="h-4">
            @if (end_time?.invalid && (end_time?.dirty || end_time?.touched)) {
            <small class="text-red-500">La hora de fin es requerida</small>
            }
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Categoría de residuo</label>
          <p-select [options]="wasteCategories" formControlName="waste_category" optionLabel="name" placeholder="Seleccionar categoría" class="w-full" />
          <div class="h-4">
            @if (waste_category?.invalid && (waste_category?.dirty || waste_category?.touched)) {
            <small class="text-red-500">La categoría es requerida</small>
            }
          </div>
        </div>

        <div>
          <label for="locality_id" class="block text-sm font-medium text-gray-700">Localidad</label>
          <p-autoComplete id="locality_id" formControlName="locality" [suggestions]="filteredLocalities"
            (completeMethod)="search($event)" [dropdown]="true" optionLabel="name"
            [invalid]="locality?.invalid && (locality?.dirty || locality?.touched)"></p-autoComplete>
          <div class="h-4">
            @if (localityControl?.invalid && (localityControl?.dirty || localityControl?.touched)) {
            <small class="text-red-500">
              <span>La localidad es requerida</span>
            </small>
            }
          </div>
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Notas</label>
        <textarea pInputText formControlName="notes" class="w-full"></textarea>
      </div>

      <div class="flex items-center gap-3">
        <button pButton type="submit" label="Crear"></button>
        <button pButton type="button" label="Cancelar" severity="secondary"
          (click)="router.navigate(['/app/routes'])"></button>
      </div>
    </form>
  </div>
</div>
